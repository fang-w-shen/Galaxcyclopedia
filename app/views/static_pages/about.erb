<% provide(:title, "Documentation") %>
<div id="container" style="color:<%= logged_in? ? 'black' : 'white' %>;">
	<% if !logged_in? %>
	<div class="homebackground" style="background-image:URL(<%= asset_path('background.png') %>)"></div>
	<% end %>

<!-- 	<div>
		<div class='col-md-4 text-center'></div>
		<div class='col-md-4 text-center'><img src="https://www.facebook.com/rsrc.php/v3/yP/r/5u9lQXdstx5.png" alt="Mission"><div class="_3-8w">API EndPoints</div></div>
		<div class='col-md-4 text-center'></div>
	</div> -->
	<div class="" style="width:100vw;position:absolute;left:0px">

		<div class="col-md-6">
			<h1 style="margin-top:-5px">Usage</h1>
			<div class="mc-table-wrap col-md-12">
				<table class="link-to-action mc-table col-md-12">
					<tbody><tr>
						<th style="<%= logged_in? ? 'border-bottom: 1px solid black' : 'border-bottom: 1px solid white' %>">Method</th>

						<th style="<%= logged_in? ? 'border-bottom: 1px solid black' : 'border-bottom: 1px solid white' %>">Endpoint</th>
						<th style="<%= logged_in? ? 'border-bottom: 1px solid black' : 'border-bottom: 1px solid white' %>">Parameter</th>
						<th style="<%= logged_in? ? 'border-bottom: 1px solid black' : 'border-bottom: 1px solid white' %>">Function</th>
					</tr>
					<tr>
						<td><a data-content="" style="<%= logged_in? ? 'color: black' : 'color: white' %>" href="/solarsystemapi/?api_key=demo" class="method read">GET</a></td>
						<td><a data-content="" style="<%= logged_in? ? 'color: black' : 'color: white' %>" href="/solarsystemapi/?api_key=demo"><code>/solarsystemapi/?api_key=demo<code></a></td>
						<td>Get a list of planets and information on each planet.</td>
					</tr>
					<tr>
						<td><a data-content="" style="<%= logged_in? ? 'color: black' : 'color: white' %>" href="/mercury/?api_key=demo" class="method read">GET</a></td>
						<td><a data-content="" style="<%= logged_in? ? 'color: black' : 'color: white' %>" href="/mercury/?api_key=demo">/mercury/?api_key=demo</a></td>
						<td>Get information on Mercury.</td>
					</tr>
					<tr>
						<td><a data-content="" style="<%= logged_in? ? 'color: black' : 'color: white' %>" href="/venus/?api_key=demo" class="method read">GET</a></td>
						<td><a data-content="" style="<%= logged_in? ? 'color: black' : 'color: white' %>" href="/venus/?api_key=demo">/venus/?api_key=demo</a></td>
						<td>Get information on Venus.</td>
					</tr>
					<tr>
						<td><a data-content="" style="<%= logged_in? ? 'color: black' : 'color: white' %>" href="/earth/?api_key=demo" class="method read">GET</a></td>
						<td><a data-content="" style="<%= logged_in? ? 'color: black' : 'color: white' %>" href="/earth/?api_key=demo">/earth/?api_key=demo</a></td>
						<td>Get information on Earth.</td>
					</tr>
					<tr>
						<td><a data-content="" style="<%= logged_in? ? 'color: black' : 'color: white' %>" href="/mars/?api_key=demo" class="method read">GET</a></td>
						<td><a data-content="" style="<%= logged_in? ? 'color: black' : 'color: white' %>" href="/mars/?api_key=demo">/mars/?api_key=demo</a></td>
						<td>Get information on Mars.</td>
					</tr>
					<tr>
						<td><a data-content="" style="<%= logged_in? ? 'color: black' : 'color: white' %>" href="/jupiter/?api_key=demo" class="method read">GET</a></td>
						<td><a data-content="" style="<%= logged_in? ? 'color: black' : 'color: white' %>" href="/jupiter/?api_key=demo">/jupiter/?api_key=demo</a></td>
						<td>Get information on Jupiter.</td>
					</tr>
					<tr>
						<td><a data-content="" style="<%= logged_in? ? 'color: black' : 'color: white' %>" href="/saturn/?api_key=demo" class="method read">GET</a></td>
						<td><a data-content="" style="<%= logged_in? ? 'color: black' : 'color: white' %>" href="/saturn/?api_key=demo">/saturn/?api_key=demo</a></td>
						<td>Get information on Saturn.</td>
					</tr>
					<tr>
						<td><a data-content="" style="<%= logged_in? ? 'color: black' : 'color: white' %>" href="/uranus/?api_key=demo" class="method read">GET</a></td>
						<td><a data-content="" style="<%= logged_in? ? 'color: black' : 'color: white' %>" href="/uranus/?api_key=demo">/uranus/?api_key=demo</a></td>
						<td>Get information on Uranus.</td>
					</tr>
					<tr>
						<td><a data-content="" style="<%= logged_in? ? 'color: black' : 'color: white' %>" href="/neptune/?api_key=demo" class="method read">GET</a></td>
						<td><a data-content="" style="<%= logged_in? ? 'color: black' : 'color: white' %>" href="/neptune/?api_key=demo">/neptune/?api_key=demo</a></td>
						<td>Get information on Neptune.</td>
					</tr>
				</tbody></table>
			</div>
			<div class="dropdown col-md-6 "  style="padding:0">
			  <button class="btn btn-default dropdown-toggle " type="button" id="dropdownMenu1" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">
			    <\>
			    <span class="caret"></span>
			  </button>
			  <ul class="dropdown-menu " aria-labelledby="dropdownMenu1">
			    <li><a onclick="changeCurl();">cURL</a></li>
			    <li><a onclick="changeXHR();">JS: XHR</a></li>
			    <li><a onclick="changeAJAX();">JQuery: AJAX</a></li>
			    <li><a onclick="changeRuby();">Ruby</a></li>
			    <li><a onclick="changePython();">Python</a></li>
			    <li><a onclick="changeC();">C#</a></li>
			    <li><a onclick="changeNode();">NodeJS</a></li>
			    <li><a onclick="changeJava();">Java</a></li>
			    <li><a onclick="changeHTTP();">HTTP</a></li>
			  </ul>
			</div>

			<pre class="col-md-12" id="codesection" style="overflow:hidden;font-size:1.2rem">
GET /solarsystemapi/?api_key={yourkey} HTTP/1.1
Host: galaxcyclopedia.herokuapp.com
accept: version.v2.json</pre>
		</div>
		<div class="col-md-6" >
		<label for="basic-url">Try It Yourself: Use 'demo' as the api_key!</label>
		<div class="input-group">
		  <span class="input-group-addon" id="basic-addon3">https://galaxcyclopedia.herokuapp.com/</span>
		  <input type="text" class="form-control" id="basic-url" aria-describedby="basic-addon3" placeholder="solarsystemapi/?api_key={yourkey}" autofocus>
		  <span class="input-group-addon" id='GET' onclick="makeajaxcall()">GET</span>
		</div>
			<pre id="exampleresponse" style="height:75vh;overflow-x:hidden;">

			</pre>
		</div>



	</div>


	<script>
		function changeCurl() {
			var text = 'curl -X GET "https://galaxcyclopedia.herokuapp.com/solarsystemapi/?api_key={yourkey}" \n  -H "accept: version.v2.json" '
			$('#codesection').html(text)
		}
		function changeXHR() {
			var text = `var data = null;
var xhr = new XMLHttpRequest();
xhr.withCredentials = true;

xhr.addEventListener("readystatechange", function () {
  if (this.readyState === 4) {
    console.log(this.responseText);
  }
});

xhr.open("GET", `+ '"https://galaxcyclopedia.herokuapp.com/solarsystemapi/?api_key={yourkey}");' +
`\nxhr.setRequestHeader("accept", "version.v2.json");

xhr.send(data);`
			$('#codesection').html(text)
		}
		function changeAJAX() {
			var text = `var settings = {
  "async": true,
  "crossDomain": true,
  "url": ` + '"https://galaxcyclopedia.herokuapp.com/solarsystemapi/?api_key={yourkey}",' +
  `\n  "method": "GET",
  "headers": {
    "accept": "version.v2.json"
  }
}

$.ajax(settings).done(function (response) {
  console.log(response);
});`
			$('#codesection').html(text)
		}

		function changeRuby() {
			var text = `require 'uri'
require 'net/http'

url = ` + 'URI("https://galaxcyclopedia.herokuapp.com/solarsystemapi/?api_key={yourkey}")'+

`\nhttp = Net::HTTP.new(url.host, url.port)
http.use_ssl = true
http.verify_mode = OpenSSL::SSL::VERIFY_NONE

request = Net::HTTP::Get.new(url)
request["accept"] = 'version.v2.json'

response = http.request(request)
puts response.read_body`
			$('#codesection').html(text)
		}
		function changePython() {
			var text = `import http.client

conn = http.client.HTTPSConnection("galaxcyclopedia.herokuapp.com")

headers = {
    'accept': "version.v2.json"
    }

conn.request("GET", "/solarsystemapi/?api_key={yourkey}", headers=headers)

res = conn.getresponse()
data = res.read()

print(data.decode("utf-8"))`
			$('#codesection').html(text)
		}
		function changeC() {
			var text = 'var url = "https://galaxcyclopedia.herokuapp.com/solarsystemapi/?api_key={yourkey}"'+
`\nvar client = new RestClient(url);
var request = new RestRequest(Method.GET);
request.AddHeader("accept", "version.v2.json");
IRestResponse response = client.Execute(request);`
			$('#codesection').html(text)
		}

		function changeNode() {
			var text = `var request = require("request");

var options = { method: 'GET',
  url: 'https://galaxcyclopedia.herokuapp.com/solarsystemapi/',
  qs: { api_key: '{yourkey}' },
  headers:
   { accept: 'version.v2.json' } };

request(options, function (error, response, body) {
  if (error) throw new Error(error);

  console.log(body);
});`
			$('#codesection').html(text)
		}
		function changeJava() {
			var text = `OkHttpClient client = new OkHttpClient();

Request request = new Request.Builder()
  .url("https://galaxcyclopedia.herokuapp.com/solarsystemapi/?api_key={yourkey}")
  .get()
  .addHeader("accept", "version.v2.json")
  .addHeader("cache-control", "no-cache")
  .addHeader("postman-token", "9050d6d1-a48f-cdd3-cc4e-89782963ff7f")
  .build();

Response response = client.newCall(request).execute();`
			$('#codesection').html(text)
		}
		function changeHTTP() {
			var text = `GET /solarsystemapi/?api_key={yourkey} HTTP/1.1
Host: galaxcyclopedia.herokuapp.com
accept: version.v2.json`
			$('#codesection').html(text)
		}
		function checkinput(e) {

			console.log("e", e);

		}
		var jsonPrettyPrint = {
		   replacer: function(match, pIndent, pKey, pVal, pEnd) {
		      var key = '<span class=json-key>';
		      var val = '<span class=json-value>';
		      var str = '<span class=json-string>';
		      var r = pIndent || '';
		      if (pKey)
		         r = r + key + pKey.replace(/[": ]/g, '') + '</span>: ';
		      if (pVal)
		         r = r + (pVal[0] == '"' ? str : val) + pVal + '</span>';
		      return r + (pEnd || '');
		      },
		   toHtml: function(obj) {
		      var jsonLine = /^( *)("[\w]+": )?("[^"]*"|[\w.+-]*)?([,[{])?$/mg;
		      return JSON.stringify(obj, null, 2)
		         .replace(/&/g, '&amp;').replace(/\\"/g, '&quot;')
		         .replace(/</g, '&lt;').replace(/>/g, '&gt;')
		         .replace(jsonLine, jsonPrettyPrint.replacer);
		      }
		   };
		function makeajaxcall() {

			var search = $('#basic-url').val();
			var settings = {
			  "async": true,
			  "crossDomain": true,
			  "url": "https://galaxcyclopedia.herokuapp.com/"+`${search}`,
			  "method": "GET",
			  "headers": {
			    "accept": "version.v2.json"
			  }
			}

			$.ajax(settings).done(function (response) {
			  let text = response;
			  $('#exampleresponse').html(jsonPrettyPrint.toHtml(text));

			}).fail(()=>{
			  $('#exampleresponse').html(`Invalid Request. Try Again.`)

			});

		}


	</script>